# 说明

VDI 是深信服提供的云桌面客户端软件，它通过远程桌面连接到虚拟机系统。

一般来说，虚拟机系统所处的网络环境是隔离的，很难与外界直接通信。如果管理员开放了权限，
那么在虚拟机系统里能够看到 VDI 宿主机的磁盘，就可以进行文件的传输，否则就无法传输。

本程序以模拟敲键盘的方式把文件内容发送到云桌面里面去，因为传输率很低，只适合传递很小的文件。

# 程序的编译和执行

本程序可以用 MinGW-w64 编译：

    g++ -o sender.exe sender.cpp

命令行参数：

    Usage: sender [-t] <filename>
      -t : text mode (default: hex mode)
      filename: the file to send

程序运行时支持两种传输模式：

- 文本模式：文件内容原样发送，仅支持 ASCII 字符，在云桌面里可以使用任何文本编辑器进行接收，
  最合适的选择就是使用记事本（notepad.exe）。
  请注意文本模式不支持包含中文的内容。

- hex 模式：文件内容以 hex 编码方式发送，支持任何文件内容，在云桌面里应该用 receiver.html 做接收，
  这样才能保存恢复成原始的文件内容。

# 使用

0. 启动 VDI 进入云桌面，在云桌面系统里面启动一个文本编辑器（比如记事本）。
   注意一定要关闭中文输入法。

1. 把 receiver.html 发送到云桌面里面去。

在宿主机执行下面的命令：

    sender -t receiver.html

等这个命令执行完，receiver.html 的文件内容应该已经被输入到云桌面里面的文本编辑器中，把它保存为 receiver.html 文件。

2. 在云桌面系统里面用谷歌浏览器打开 receiver.html。
   注意一定要关闭中文输入法。

3. 发送任意文件到云桌面里面去。

在宿主机执行下面的命令：

    sender test.txt

等这个命令执行完之后，在云桌面里面的 receiver.html 网页中点击保存按钮，就可以得到接收的文件了。

